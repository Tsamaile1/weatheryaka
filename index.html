<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Yaka</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>

    <style>
      body {
        background-color: #f6f5fa;
      }
      a {
        color: #eede52;
      }

      .content {
        background-color: white;
        margin: 40px auto;
        max-width: 400px;
        padding: 40px;
        box-shadow: 0 10px 20px black;
        border-radius: 20px;
        font-family: "Roboto", sans-serif;
        font-weight: 400;
        font-style: normal;
        color: black;
        background: url(data:image/jpeg;base64,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);
        background-size: 500px;
      }

      .search {
        width: 250px;
        height: 30px;
        background-color: #f6f5fa;
        border-style: none;
        border-radius: 5px;
        padding-left: 10px;
      }
      .submit {
        width: 80px;
        height: 30px;
        font-family: "Nerko One", cursive;
        font-weight: 400;
        font-style: normal;
        background-color: #7c52ee;
        color: white;
        border-style: none;
        border-radius: 5px;
      }

      .city-weather {
        display: flex;
        justify-content: space-between;
      }

      .current-temp-info {
        display: flex;
      }
      .weather-temp {
        font-size: 40px;
        margin-top: 60px;
      }

      .icon {
        margin-top: 50px;
        margin-left: 40px;
        width: 70px;
      }
      .temp-unit {
        margin-top: 40px;
      }

      .current-city {
        font-size: 30px;
        margin-top: 60px;
      }
      .description {
        margin: 0;
      }

      span {
        color: red;
      }
      .time {
        color: black;
      }
      .forecast-date {
        text-align: center;
        color: black;
        font-size: 12px;
        line-height: 20px;
      }
      .forecast-icon {
        font-size: 18px;
        text-align: center;
      }
      .forecast-temp {
        text-align: center;
        font-size: 12px;
        padding: 10px;
        color: red;
      }
      .forecast-temperatures {
        display: flex;
        text-align: center;
      }
      .weather-forecast {
        display: flex;
        justify-content: space-between;
      }
      footer {
        font-size: 10px;
      }
      .forecast-icon {
        width: 50px;
      }
    </style>
  </head>
  <body>
    <div class="content">
      <div class="header">
        <header>
          <form id="search-form">
            <input
              type="search"
              class="search"
              placeholder="Enter a city..."
              id="search-form-input"
              required
            />
            <input type="submit" class="submit" value="Search" />
          </form>
        </header>
      </div>

      <main>
        <div class="city-weather">
          <div class="current-city" id="city"><h1></h1></div>
          <div class="current-temp-info">
            <div id="icon" class="icon"></div>
            <div class="weather-temp" id="temperature"><h2></h2></div>
            <div class="temp-unit"><h2>Â°C</h2></div>
          </div>
        </div>
        <div class="description">
          <p>
            <span id="time" class="time"></span>
            <span id="weather-description"></span> humidity
            <span id="humidity"></span> Wind
            <span id="wind"></span>
          </p>
        </div>
      </main>
      <br />
      <br />
      <div class="weather-forecast" id="forecast"></div>
      <br />
      <br />
      <div class="footer">
        <footer>
          This app is coded by
          <a href="https://github.com/Tsamaile1" target="_blank"
            >Tsamaile Lebitsa</a
          >, is found on
          <a
            href="https://github.com/Tsamaile1/myweather/blob/main/index.html"
            target="_blank"
            >Git-hub</a
          >
          and hosted on <a href="https://myweather0210.netlify.app/">Netlify</a>
        </footer>
      </div>
    </div>
    <script>
      function refreshWeather(response) {
        console.log(response.data);
        let temperatureElement = document.querySelector("#temperature");
        let temperature = response.data.temperature.current;
        let descriptionElement = document.querySelector("#weather-description");
        let humidityElement = document.querySelector("#humidity");
        let windSpeed = document.querySelector("#wind");
        let timeElement = document.querySelector("#time");
        let date = new Date(response.data.time * 1000);
        let iconElement = document.querySelector("#icon");
        console.log(response.data);
        iconElement.innerHTML = `<img src="${response.data.condition.icon_url}" class="icon"/>`;
        timeElement.innerHTML = formatDate(date);
        windSpeed.innerHTML = `${response.data.wind.speed} km/hr`;
        humidityElement.innerHTML = `${response.data.temperature.humidity} %`;
        temperatureElement.innerHTML = Math.round(temperature);
        descriptionElement.innerHTML = response.data.condition.description;

        getForecast(response.data.city);
      }
      function formatDate(date) {
        let minutes = date.getMinutes();
        let hours = date.getHours();
        let days = [
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
        ];
        let day = days[date.getDay()];
        if (minutes < 10) {
          minutes = `0 ${minutes}`;
        }

        return `${day} ${hours}:${minutes}`;
      }
      function searchCity(city) {
        let apiKey = "bacodabffe100ecf22f2d099t74223bc";
        let apiUrl = `https://api.shecodes.io/weather/v1/current?query=${city}&key=${apiKey}`;
        axios.get(apiUrl).then(refreshWeather);
      }
      function searchSubmit(event) {
        event.preventDefault();
        let searchInput = document.querySelector("#search-form-input");
        let cityElement = document.querySelector("#city");
        cityElement.innerHTML = searchInput.value;

        searchCity(searchInput.value);
      }
      let searchFormElement = document.querySelector("#search-form");
      searchFormElement.addEventListener("submit", searchSubmit);

      function displayForecast(response) {
        let forecastHTML = "";
        response.data.daily.forEach(function (day, index) {
          if (index < 5) {
            forecastHTML =
              forecastHTML +
              `<div class="forecast-day">
        <div class="forecast-date">${formatDay(day.time)}</div>
        <div class="forecast-icon">
          <img src="${day.condition.icon_url}" class="forecast-icon"/></div>
        <div class="forecast-temp"><div class="forecast-temperature"><strong>${Math.round(
          day.temperature.maximum
        )}</strong></div> <div class="forecast-temperature">${Math.round(
                day.temperature.minimum
              )}</div></div>
      </div>
      `;
          }
        });

        let forecastElement = document.querySelector("#forecast");
        forecastElement.innerHTML = forecastHTML;
      }
      displayForecast();
      function formatDay(timestamp) {
        let date= new Date(timestamp * 1000);
        let days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];

        return days[date.getDay()]
        
      }
      function getForecast(city) {
        let apiKey = "bacodabffe100ecf22f2d099t74223bc";
        let apiUrl = `https://api.shecodes.io/weather/v1/forecast?query=${city}&key=${apiKey}`;
        axios.get(apiUrl).then(displayForecast);
      }
    </script>
  </body>
</html>
